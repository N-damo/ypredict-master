#Ypredict  
**Ypredict** is a python based software package that predicts y chromosome haplogroup.  
* The current version is 0.0.1
##getting started
***
##step1  
Download y haplogroup tree from isogg(<https://isogg.org/tree/>). Then, filter snp by snpfilter.py.In this step, hotspot and backmutate snp will be removed.Finally, a map.json will be generated.  
`python snpfilter.py -snp snp.csv`
##step2
In this step, we will use the file ref_vcf.gz generated by the step1 to make snp calling using gatk3.8 UnifiedGenotyper module. Critically, we use hg38 refrence genome in this step.

`java -Xmx32g -jar GenomeAnalysisTK.jar -T UnifiedGenotyper \
-R hs38DH.fa -I out.bam -o y.vcf.gz \
--intervals chrY \
-ploidy 1 \
--dbsnp dbsnp150_chr.vcf.gz \
--output_mode EMIT_ALL_SITES --genotyping_mode GENOTYPE_GIVEN_ALLELES \
--alleles ref_vcf.gz ;`
##step3
y chromosome haplogroup can be predicted by ypredict.py. In the this step, the scrip will automatically output the most likelily haplogroup.  

`python ypredict3.py -vcf y.vcf.gz -s hfspecial.xlsx -m map.json`

If you need to update y haplogroup tree file downloaded from isogg, you can redo step1 and get a updated map.json.